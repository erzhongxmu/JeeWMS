(function(a){if(!a.event.special.destroyed){a.event.special.destroyed={remove:function(b){if(b.handler){b.handler()}}}}a.fn.extend({maxlength:function(d,g){var q=a("body"),l={showOnReady:false,alwaysShow:false,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-important label-danger",separator:" / ",preText:"",postText:"",showMaxLength:true,placement:"bottom",message:null,showCharsTyped:true,validate:false,utf8:false,appendToParent:false,twoCharLinebreak:true,customMaxAttribute:null,allowOverMax:false};if(a.isFunction(d)&&!g){g=d;d={}}d=a.extend(l,d);function c(t){var v=t.val();if(d.twoCharLinebreak){v=v.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n")}else{v=v.replace(new RegExp("\r?\n","g"),"\n")}var u=0;if(d.utf8){u=n(v)}else{u=v.length}return u}function h(t,u){var w=t.val();var v=0;if(d.twoCharLinebreak){w=w.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n");if(w.substr(w.length-1)==="\n"&&w.length%2===1){v=1}}t.val(w.substr(0,u-v))}function n(u){var t=0;for(var w=0;w<u.length;w++){var v=u.charCodeAt(w);if(v<128){t++}else{if((v>127)&&(v<2048)){t=t+2}else{t=t+3}}}return t}function f(u,w,v){var t=true;if(!d.alwaysShow&&(v-c(u)>w)){t=false}return t}function e(t,u){var v=u-c(t);return v}function k(t,u){u.css({display:"block"});t.trigger("maxlength.shown")}function o(t,u){if(d.alwaysShow){return}u.css({display:"none"});t.trigger("maxlength.hidden")}function s(w,u,v){var t="";if(d.message){if(typeof d.message==="function"){t=d.message(w,u)}else{t=d.message.replace("%charsTyped%",v).replace("%charsRemaining%",u-v).replace("%charsTotal%",u)}}else{if(d.preText){t+=d.preText}if(!d.showCharsTyped){t+=u-v}else{t+=v}if(d.showMaxLength){t+=d.separator+u}if(d.postText){t+=d.postText}}return t}function r(u,t,v,w){if(w){w.html(s(t.val(),v,(v-u)));if(u>0){if(f(t,d.threshold,v)){k(t,w.removeClass(d.limitReachedClass).addClass(d.warningClass))}else{o(t,w)}}else{k(t,w.removeClass(d.warningClass).addClass(d.limitReachedClass))}}if(d.customMaxAttribute){if(u<0){t.addClass("overmax")}else{t.removeClass("overmax")}}}function p(t){var u=t[0];return a.extend({},(typeof u.getBoundingClientRect==="function")?u.getBoundingClientRect():{width:u.offsetWidth,height:u.offsetHeight},t.offset())}function i(t,x){var z=p(t);if(a.type(d.placement)==="function"){d.placement(t,x,z);return}if(a.isPlainObject(d.placement)){b(d.placement,x);return}var w=t.outerWidth(),v=x.outerWidth(),u=x.width(),y=x.height();if(d.appendToParent){z.top-=t.parent().offset().top;z.left-=t.parent().offset().left}switch(d.placement){case"bottom":x.css({top:z.top+z.height,left:z.left+z.width/2-u/2});break;case"top":x.css({top:z.top-y,left:z.left+z.width/2-u/2});break;case"left":x.css({top:z.top+z.height/2-y/2,left:z.left-u});break;case"right":x.css({top:z.top+z.height/2-y/2,left:z.left+z.width});break;case"bottom-right":x.css({top:z.top+z.height,left:z.left+z.width});break;case"top-right":x.css({top:z.top-y,left:z.left+w});break;case"top-left":x.css({top:z.top-y,left:z.left-v});break;case"bottom-left":x.css({top:z.top+t.outerHeight(),left:z.left-v});break;case"centered-right":x.css({top:z.top+(y/2),left:z.left+w-v-3});break;case"bottom-right-inside":x.css({top:z.top+z.height,left:z.left+z.width-v});break;case"top-right-inside":x.css({top:z.top-y,left:z.left+w-v});break;case"top-left-inside":x.css({top:z.top-y,left:z.left});break;case"bottom-left-inside":x.css({top:z.top+t.outerHeight(),left:z.left});break}}function b(v,w){if(!v||!w){return}var u=["top","bottom","left","right","position"];var t={};a.each(u,function(y,x){var z=d.placement[x];if(typeof z!=="undefined"){t[x]=z}});w.css(t);return}function j(){return d.placement==="bottom-right-inside"||d.placement==="top-right-inside"||typeof d.placement==="function"||(d.message&&typeof d.message==="function")}function m(u){var t=u.attr("maxlength")||d.customMaxAttribute;if(d.customMaxAttribute&&!d.allowOverMax){var v=u.attr(d.customMaxAttribute);if(!t||v<t){t=v}}if(!t){t=u.attr("size")}return t}return this.each(function(){var u=a(this),v,w;a(window).resize(function(){if(w){i(u,w)}});function t(){var y=s(u.val(),v,"0");v=m(u);if(!w){w=a('<span class="bootstrap-maxlength"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}).html(y)}if(u.is("textarea")){u.data("maxlenghtsizex",u.outerWidth());u.data("maxlenghtsizey",u.outerHeight());u.mouseup(function(){if(u.outerWidth()!==u.data("maxlenghtsizex")||u.outerHeight()!==u.data("maxlenghtsizey")){i(u,w)}u.data("maxlenghtsizex",u.outerWidth());u.data("maxlenghtsizey",u.outerHeight())})}if(d.appendToParent){u.parent().append(w);u.parent().css("position","relative")}else{q.append(w)}var x=e(u,m(u));r(x,u,v,w);i(u,w)}if(d.showOnReady){u.ready(function(){t()})}else{u.focus(function(){t()})}u.on("maxlength.reposition",function(){i(u,w)});u.on("destroyed",function(){if(w){w.remove()}});u.on("blur",function(){if(w&&!d.showOnReady&&!d.alwaysShow){w.remove()}});u.on("input",function(){var y=m(u),z=e(u,y),x=true;if(d.validate&&z<0){h(u,y);x=false}else{r(z,u,v,w)
}if(j()){i(u,w)}return x})})}})}(jQuery));