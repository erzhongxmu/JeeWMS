(function(a){var b=function(c){this.init("address",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.$input=this.$tpl.find("input")},value2html:function(e,d){if(!e){a(d).empty();return}var c=a("<div>").text(e.city).html()+", "+a("<div>").text(e.street).html()+" st., bld. "+a("<div>").text(e.building).html();a(d).html(c)},html2value:function(c){return null},value2str:function(d){var e="";if(d){for(var c in d){e=e+c+":"+d[c]+";"}}return e},str2value:function(c){return c},value2input:function(c){if(!c){return}this.$input.filter('[name="city"]').val(c.city);this.$input.filter('[name="street"]').val(c.street);this.$input.filter('[name="building"]').val(c.building)},input2value:function(){return{city:this.$input.filter('[name="city"]').val(),street:this.$input.filter('[name="street"]').val(),building:this.$input.filter('[name="building"]').val()}},activate:function(){this.$input.filter('[name="city"]').focus()},autosubmit:function(){this.$input.keydown(function(c){if(c.which===13){a(this).closest("form").submit()}})}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-address"><label><span>城市：</span><input type="text" name="city" class="input-small"></label></div>'+'<div class="editable-address"><label><span>街道：</span><input type="text" name="street" class="input-small"></label></div>'+'<div class="editable-address"><label><span>门牌号：</span><input type="text" name="building" class="input-mini"></label></div>',inputclass:""});a.fn.editabletypes.address=b}(window.jQuery));